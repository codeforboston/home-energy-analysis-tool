
> test
> cd ../python && (if [ -d .venv ]; then . .venv/bin/activate; else . ./setup-python.sh; fi) && uv pip install build && uv build && cd ../heat-stack && vitest && rm -rf ../python/dist

Audited 1 package in 2ms
Building source distribution...
running egg_info
writing src/rules_engine.egg-info/PKG-INFO
writing dependency_links to src/rules_engine.egg-info/dependency_links.txt
writing requirements to src/rules_engine.egg-info/requires.txt
writing top-level names to src/rules_engine.egg-info/top_level.txt
reading manifest file 'src/rules_engine.egg-info/SOURCES.txt'
writing manifest file 'src/rules_engine.egg-info/SOURCES.txt'
running sdist
running egg_info
writing src/rules_engine.egg-info/PKG-INFO
writing dependency_links to src/rules_engine.egg-info/dependency_links.txt
writing requirements to src/rules_engine.egg-info/requires.txt
writing top-level names to src/rules_engine.egg-info/top_level.txt
reading manifest file 'src/rules_engine.egg-info/SOURCES.txt'
writing manifest file 'src/rules_engine.egg-info/SOURCES.txt'
running check
creating rules_engine-0.0.1
creating rules_engine-0.0.1/src/data
creating rules_engine-0.0.1/src/rules_engine
creating rules_engine-0.0.1/src/rules_engine.egg-info
copying files to rules_engine-0.0.1...
copying README.md -> rules_engine-0.0.1
copying pyproject.toml -> rules_engine-0.0.1
copying src/data/merged_structure_temps.csv -> rules_engine-0.0.1/src/data
copying src/rules_engine/__init__.py -> rules_engine-0.0.1/src/rules_engine
copying src/rules_engine/constants.py -> rules_engine-0.0.1/src/rules_engine
copying src/rules_engine/engine.py -> rules_engine-0.0.1/src/rules_engine
copying src/rules_engine/helpers.py -> rules_engine-0.0.1/src/rules_engine
copying src/rules_engine/parser.py -> rules_engine-0.0.1/src/rules_engine
copying src/rules_engine/pydantic_models.py -> rules_engine-0.0.1/src/rules_engine
copying src/rules_engine.egg-info/PKG-INFO -> rules_engine-0.0.1/src/rules_engine.egg-info
copying src/rules_engine.egg-info/SOURCES.txt -> rules_engine-0.0.1/src/rules_engine.egg-info
copying src/rules_engine.egg-info/dependency_links.txt -> rules_engine-0.0.1/src/rules_engine.egg-info
copying src/rules_engine.egg-info/requires.txt -> rules_engine-0.0.1/src/rules_engine.egg-info
copying src/rules_engine.egg-info/top_level.txt -> rules_engine-0.0.1/src/rules_engine.egg-info
copying src/rules_engine.egg-info/SOURCES.txt -> rules_engine-0.0.1/src/rules_engine.egg-info
Writing rules_engine-0.0.1/setup.cfg
Creating tar archive
removing 'rules_engine-0.0.1' (and everything under it)
Building wheel from source distribution...
running egg_info
writing src/rules_engine.egg-info/PKG-INFO
writing dependency_links to src/rules_engine.egg-info/dependency_links.txt
writing requirements to src/rules_engine.egg-info/requires.txt
writing top-level names to src/rules_engine.egg-info/top_level.txt
reading manifest file 'src/rules_engine.egg-info/SOURCES.txt'
writing manifest file 'src/rules_engine.egg-info/SOURCES.txt'
running bdist_wheel
running build
running build_py
creating build/lib/rules_engine
copying src/rules_engine/constants.py -> build/lib/rules_engine
copying src/rules_engine/__init__.py -> build/lib/rules_engine
copying src/rules_engine/parser.py -> build/lib/rules_engine
copying src/rules_engine/engine.py -> build/lib/rules_engine
copying src/rules_engine/pydantic_models.py -> build/lib/rules_engine
copying src/rules_engine/helpers.py -> build/lib/rules_engine
running egg_info
writing src/rules_engine.egg-info/PKG-INFO
writing dependency_links to src/rules_engine.egg-info/dependency_links.txt
writing requirements to src/rules_engine.egg-info/requires.txt
writing top-level names to src/rules_engine.egg-info/top_level.txt
reading manifest file 'src/rules_engine.egg-info/SOURCES.txt'
writing manifest file 'src/rules_engine.egg-info/SOURCES.txt'
creating build/lib/data
copying src/data/merged_structure_temps.csv -> build/lib/data
installing to build/bdist.macosx-15.0-x86_64/wheel
running install
running install_lib
creating build/bdist.macosx-15.0-x86_64/wheel
creating build/bdist.macosx-15.0-x86_64/wheel/rules_engine
copying build/lib/rules_engine/constants.py -> build/bdist.macosx-15.0-x86_64/wheel/./rules_engine
copying build/lib/rules_engine/__init__.py -> build/bdist.macosx-15.0-x86_64/wheel/./rules_engine
copying build/lib/rules_engine/parser.py -> build/bdist.macosx-15.0-x86_64/wheel/./rules_engine
copying build/lib/rules_engine/engine.py -> build/bdist.macosx-15.0-x86_64/wheel/./rules_engine
copying build/lib/rules_engine/pydantic_models.py -> build/bdist.macosx-15.0-x86_64/wheel/./rules_engine
copying build/lib/rules_engine/helpers.py -> build/bdist.macosx-15.0-x86_64/wheel/./rules_engine
creating build/bdist.macosx-15.0-x86_64/wheel/data
copying build/lib/data/merged_structure_temps.csv -> build/bdist.macosx-15.0-x86_64/wheel/./data
running install_egg_info
Copying src/rules_engine.egg-info to build/bdist.macosx-15.0-x86_64/wheel/./rules_engine-0.0.1-py3.13.egg-info
running install_scripts
creating build/bdist.macosx-15.0-x86_64/wheel/rules_engine-0.0.1.dist-info/WHEEL
creating '/Users/ethanadmin/projects/home-energy-analysis-tool/python/dist/.tmp-6br909et/rules_engine-0.0.1-py3-none-any.whl' and adding 'build/bdist.macosx-15.0-x86_64/wheel' to it
adding 'data/merged_structure_temps.csv'
adding 'rules_engine/__init__.py'
adding 'rules_engine/constants.py'
adding 'rules_engine/engine.py'
adding 'rules_engine/helpers.py'
adding 'rules_engine/parser.py'
adding 'rules_engine/pydantic_models.py'
adding 'rules_engine-0.0.1.dist-info/METADATA'
adding 'rules_engine-0.0.1.dist-info/WHEEL'
adding 'rules_engine-0.0.1.dist-info/top_level.txt'
adding 'rules_engine-0.0.1.dist-info/RECORD'
removing build/bdist.macosx-15.0-x86_64/wheel
Successfully built dist/rules_engine-0.0.1.tar.gz
Successfully built dist/rules_engine-0.0.1-py3-none-any.whl

 DEV  v3.0.8 /Users/ethanadmin/projects/home-energy-analysis-tool/heat-stack

 ‚úì app/utils/misc.error-message.test.ts (3 tests) 14ms
 ‚úì app/utils/headers.server.test.ts (3 tests) 14ms
 ‚ùØ app/components/ui/heat/CaseSummaryComponents/SingleCaseForm.test.tsx (9 tests | 9 failed) 24ms
   √ó SingleCaseForm > should render form components 5ms
     ‚Üí document is not defined
   √ó SingleCaseForm > should show Calculate button when not in edit mode 1ms
     ‚Üí document is not defined
   √ó SingleCaseForm > should show Save Changes button when in edit mode 1ms
     ‚Üí document is not defined
   √ó SingleCaseForm > should display case ID when caseInfo is provided 2ms
     ‚Üí document is not defined
   √ó SingleCaseForm > should show usage data components when showUsageData is true 1ms
     ‚Üí document is not defined
   √ó SingleCaseForm > should show error when heat load analysis data is missing 2ms
     ‚Üí document is not defined
   √ó SingleCaseForm > should show success message when case is saved 2ms
     ‚Üí document is not defined
   √ó SingleCaseForm > should not show success message when case is not saved 1ms
     ‚Üí document is not defined
   √ó SingleCaseForm > should not show success message when caseId is undefined 1ms
     ‚Üí document is not defined
stdout | app/utils/db/bill.db.server.test.ts > bill.db.server > insertProcessedBills > should insert processed energy bills
‚úÖ Inserted 6 ProcessedEnergyBill records

stdout | app/utils/db/bill.db.server.test.ts > bill.db.server > insertProcessedBills > should handle date parsing correctly
‚úÖ Inserted 1 ProcessedEnergyBill records

 ‚úì app/utils/db/case.db.server.test.ts (5 tests) 591ms
stdout | app/utils/db/bill.db.server.test.ts > bill.db.server > deleteBillsForAnalysis > should delete all bills for an analysis
‚úÖ Inserted 6 ProcessedEnergyBill records

stdout | app/utils/db/bill.db.server.test.ts > bill.db.server > deleteBillsForAnalysis > should delete all bills for an analysis
üóëÔ∏è Deleted 6 ProcessedEnergyBill records

stdout | app/utils/db/bill.db.server.test.ts > bill.db.server > deleteBillsForAnalysis > should return 0 when no bills exist for analysis
üóëÔ∏è Deleted 0 ProcessedEnergyBill records

stdout | app/utils/db/bill.db.server.test.ts > bill.db.server > deleteBillsForAnalysis > should only delete bills for the specified analysis
‚úÖ Inserted 6 ProcessedEnergyBill records

stdout | app/utils/db/bill.db.server.test.ts > bill.db.server > deleteBillsForAnalysis > should only delete bills for the specified analysis
‚úÖ Inserted 6 ProcessedEnergyBill records

stdout | app/utils/db/bill.db.server.test.ts > bill.db.server > deleteBillsForAnalysis > should only delete bills for the specified analysis
üóëÔ∏è Deleted 6 ProcessedEnergyBill records

 ‚ùØ app/utils/db/bill.db.server.test.ts (7 tests | 1 failed) 829ms
   √ó bill.db.server > insertProcessedBills > should insert processed energy bills 139ms
     ‚Üí expected 58.69488146725406 to be 58.694881467254056 // Object.is equality
   ‚úì bill.db.server > insertProcessedBills > should return 0 when no processed energy bills exist
   ‚úì bill.db.server > insertProcessedBills > should return 0 when gasBillDataFromTextFile is null
   ‚úì bill.db.server > insertProcessedBills > should handle date parsing correctly
   ‚úì bill.db.server > deleteBillsForAnalysis > should delete all bills for an analysis
   ‚úì bill.db.server > deleteBillsForAnalysis > should return 0 when no bills exist for analysis
   ‚úì bill.db.server > deleteBillsForAnalysis > should only delete bills for the specified analysis
stdout | app/utils/logic/case.logic.server.test.ts > case.logic.server > processCaseUpdate > should delete existing bills before inserting new ones
‚úÖ Inserted 6 ProcessedEnergyBill records

 ‚ùØ app/utils/logic/case.logic.server.test.ts (7 tests | 7 failed) 925ms
   √ó case.logic.server > processCaseSubmission > should process a complete case submission 116ms
     ‚Üí Cannot read properties of undefined (reading 'toJs')
   √ó case.logic.server > processCaseSubmission > should throw error when state_id is missing 140ms
     ‚Üí expected [Function] to throw error including 'Missing state_id' but got 'Cannot read properties of undefined (‚Ä¶'
   √ó case.logic.server > processCaseSubmission > should throw error when county_id is missing 152ms
     ‚Üí expected [Function] to throw error including 'Missing county_id' but got 'Cannot read properties of undefined (‚Ä¶'
   √ó case.logic.server > processCaseSubmission > should call all external dependencies correctly 128ms
     ‚Üí Cannot read properties of undefined (reading 'toJs')
   √ó case.logic.server > processCaseUpdate > should process a case update 121ms
     ‚Üí Cannot read properties of undefined (reading 'toJs')
   √ó case.logic.server > processCaseUpdate > should throw error when HeatingInput is not found 123ms
     ‚Üí expected [Function] to throw error including 'Failed to find HeatingInput record fo‚Ä¶' but got 'Cannot read properties of undefined (‚Ä¶'
   √ó case.logic.server > processCaseUpdate > should delete existing bills before inserting new ones 136ms
     ‚Üí Cannot read properties of undefined (reading 'toJs')
 ‚úì app/routes/cases.test.ts (1 test) 11ms
 ‚úì app/routes/_auth+/auth.$provider.callback.test.ts (8 tests) 251ms
 ‚úì app/utils/misc.use-double-check.test.tsx (3 tests) 184ms
Loading pydantic_core
Loaded pydantic_core
Loading pydantic
Loaded pydantic
Loading typing_extensions
Loaded typing_extensions
Loading annotated_types
Loaded annotated_types
Loading rules_engine
Loaded rules_engine
stderr | app/utils/pyodide.test.ts > pyodide solves climate change
[MSW] Warning: intercepted a request without a matching request handler:

  ‚Ä¢ GET https://geocoding.geo.census.gov/geocoder/geographies/onelineaddress?address=1+Broadway%2C+Cambridge%2C+MA+02142&format=json&benchmark=2020&vintage=Census2020_Census2020?address=1+Broadway%2C+Cambridge%2C+MA+02142&format=json&benchmark=2020&vintage=Census2020_Census2020

If you still wish to intercept this unhandled request, please create a request handler for it.
Read more: https://mswjs.io/docs/getting-started/mocks

 ‚úì app/routes/users+/$username.test.tsx (2 tests) 247ms
stdout | app/utils/pyodide.test.ts > pyodide solves climate change
address 1 Broadway, Cambridge, MA 02142 [33m-71.111564847018[39m [33m42.373237747235[39m

stderr | app/utils/pyodide.test.ts > pyodide solves climate change
[MSW] Warning: intercepted a request without a matching request handler:

  ‚Ä¢ GET https://archive-api.open-meteo.com/v1/archive?latitude=42.373237747235&longitude=-71.111564847018&daily=temperature_2m_mean&timezone=America%2FNew_York&start_date=2024-03-20&end_date=2024-04-20&temperature_unit=fahrenheit?latitude=42.373237747235&longitude=-71.111564847018&daily=temperature_2m_mean&timezone=America%2FNew_York&start_date=2024-03-20&end_date=2024-04-20&temperature_unit=fahrenheit

If you still wish to intercept this unhandled request, please create a request handler for it.
Read more: https://mswjs.io/docs/getting-started/mocks

stdout | app/utils/pyodide.test.ts > pyodide solves climate change
weather data {
  dates: [
    [35m2024-03-20T00:00:00.000Z[39m,
    [35m2024-03-21T00:00:00.000Z[39m,
    [35m2024-03-22T00:00:00.000Z[39m,
    [35m2024-03-23T00:00:00.000Z[39m,
    [35m2024-03-24T00:00:00.000Z[39m,
    [35m2024-03-25T00:00:00.000Z[39m,
    [35m2024-03-26T00:00:00.000Z[39m,
    [35m2024-03-27T00:00:00.000Z[39m,
    [35m2024-03-28T00:00:00.000Z[39m,
    [35m2024-03-29T00:00:00.000Z[39m,
    [35m2024-03-30T00:00:00.000Z[39m,
    [35m2024-03-31T00:00:00.000Z[39m,
    [35m2024-04-01T00:00:00.000Z[39m,
    [35m2024-04-02T00:00:00.000Z[39m,
    [35m2024-04-03T00:00:00.000Z[39m,
    [35m2024-04-04T00:00:00.000Z[39m,
    [35m2024-04-05T00:00:00.000Z[39m,
    [35m2024-04-06T00:00:00.000Z[39m,
    [35m2024-04-07T00:00:00.000Z[39m,
    [35m2024-04-08T00:00:00.000Z[39m,
    [35m2024-04-09T00:00:00.000Z[39m,
    [35m2024-04-10T00:00:00.000Z[39m,
    [35m2024-04-11T00:00:00.000Z[39m,
    [35m2024-04-12T00:00:00.000Z[39m,
    [35m2024-04-13T00:00:00.000Z[39m,
    [35m2024-04-14T00:00:00.000Z[39m,
    [35m2024-04-15T00:00:00.000Z[39m,
    [35m2024-04-16T00:00:00.000Z[39m,
    [35m2024-04-17T00:00:00.000Z[39m,
    [35m2024-04-18T00:00:00.000Z[39m,
    [35m2024-04-19T00:00:00.000Z[39m,
    [35m2024-04-20T00:00:00.000Z[39m
  ],
  temperatures: [
    [33m40.5[39m, [33m31.5[39m, [33m32.1[39m, [33m39.2[39m, [33m33.1[39m, [33m34.9[39m,
      [33m37[39m, [33m42.8[39m, [33m46.1[39m, [33m42.3[39m, [33m43.4[39m, [33m45.6[39m,
      [33m43[39m,   [33m41[39m, [33m39.4[39m, [33m36.1[39m, [33m39.2[39m, [33m38.8[39m,
    [33m40.3[39m, [33m48.7[39m, [33m47.4[39m, [33m48.6[39m, [33m48.8[39m, [33m58.5[39m,
    [33m50.6[39m, [33m50.3[39m, [33m54.8[39m, [33m53.3[39m, [33m46.5[39m, [33m44.5[39m,
    [33m48.2[39m, [33m50.2[39m
  ]
}

stdout | app/utils/pyodide.test.ts > pyodide solves climate change
LiteralMap(3) [Map] {
  [32m'heat_load_output'[39m => LiteralMap(9) [Map] {
    [32m'estimated_balance_point'[39m => [33m60[39m,
    [32m'other_fuel_usage'[39m => [33m8.666666666666666[39m,
    [32m'average_indoor_temperature'[39m => [33m59.25[39m,
    [32m'difference_between_ti_and_tbp'[39m => [33m-0.75[39m,
    [32m'design_temperature'[39m => [33m9.5[39m,
    [32m'whole_home_heat_loss_rate'[39m => [33m16624.37678062678[39m,
    [32m'standard_deviation_of_heat_loss_rate'[39m => [33m0.3967358807600794[39m,
    [32m'average_heat_load'[39m => [33m1018243.0778133902[39m,
    [32m'maximum_heat_load'[39m => [33m1005774.7952279202[39m
  },
  [32m'balance_point_graph'[39m => LiteralMap(1) [Map] {
    [32m'records'[39m => [ [36m[LiteralMap [Map]][39m, [36m[LiteralMap [Map]][39m, [36m[LiteralMap [Map]][39m ]
  },
  [32m'processed_energy_bills'[39m => [
    LiteralMap(8) [Map] {
      [32m'period_start_date'[39m => [32m'2020-10-02T00:00:00'[39m,
      [32m'period_end_date'[39m => [32m'2020-11-04T00:00:00'[39m,
      [32m'usage'[39m => [33m29[39m,
      [32m'inclusion_override'[39m => [33mfalse[39m,
      [32m'analysis_type'[39m => [33m1[39m,
      [32m'default_inclusion'[39m => [33mfalse[39m,
      [32m'eliminated_as_outlier'[39m => [33mfalse[39m,
      [32m'whole_home_heat_loss_rate'[39m => [90mundefined[39m
    },
    LiteralMap(8) [Map] {
      [32m'period_start_date'[39m => [32m'2020-11-05T00:00:00'[39m,
      [32m'period_end_date'[39m => [32m'2020-12-03T00:00:00'[39m,
      [32m'usage'[39m => [33m36[39m,
      [32m'inclusion_override'[39m => [33mfalse[39m,
      [32m'analysis_type'[39m => [33m1[39m,
      [32m'default_inclusion'[39m => [33mtrue[39m,
      [32m'eliminated_as_outlier'[39m => [33mfalse[39m,
      [32m'whole_home_heat_loss_rate'[39m => [33m5665.242165242166[39m
    },
    LiteralMap(8) [Map] {
      [32m'period_start_date'[39m => [32m'2020-12-04T00:00:00'[39m,
      [32m'period_end_date'[39m => [32m'2021-01-07T00:00:00'[39m,
      [32m'usage'[39m => [33m97[39m,
      [32m'inclusion_override'[39m => [33mfalse[39m,
      [32m'analysis_type'[39m => [33m1[39m,
      [32m'default_inclusion'[39m => [33mtrue[39m,
      [32m'eliminated_as_outlier'[39m => [33mfalse[39m,
      [32m'whole_home_heat_loss_rate'[39m => [33m18308.404558404556[39m
    },
    LiteralMap(8) [Map] {
      [32m'period_start_date'[39m => [32m'2021-01-08T00:00:00'[39m,
      [32m'period_end_date'[39m => [32m'2021-02-05T00:00:00'[39m,
      [32m'usage'[39m => [33m105[39m,
      [32m'inclusion_override'[39m => [33mfalse[39m,
      [32m'analysis_type'[39m => [33m1[39m,
      [32m'default_inclusion'[39m => [33mtrue[39m,
      [32m'eliminated_as_outlier'[39m => [33mfalse[39m,
      [32m'whole_home_heat_loss_rate'[39m => [33m19966.524216524216[39m
    },
    LiteralMap(8) [Map] {
      [32m'period_start_date'[39m => [32m'2021-02-06T00:00:00'[39m,
      [32m'period_end_date'[39m => [32m'2021-03-05T00:00:00'[39m,
      [32m'usage'[39m => [33m98[39m,
      [32m'inclusion_override'[39m => [33mfalse[39m,
      [32m'analysis_type'[39m => [33m1[39m,
      [32m'default_inclusion'[39m => [33mtrue[39m,
      [32m'eliminated_as_outlier'[39m => [33mfalse[39m,
      [32m'whole_home_heat_loss_rate'[39m => [33m18515.669515669513[39m
    },
    LiteralMap(8) [Map] {
      [32m'period_start_date'[39m => [32m'2021-03-06T00:00:00'[39m,
      [32m'period_end_date'[39m => [32m'2021-04-06T00:00:00'[39m,
      [32m'usage'[39m => [33m66[39m,
      [32m'inclusion_override'[39m => [33mfalse[39m,
      [32m'analysis_type'[39m => [33m1[39m,
      [32m'default_inclusion'[39m => [33mfalse[39m,
      [32m'eliminated_as_outlier'[39m => [33mfalse[39m,
      [32m'whole_home_heat_loss_rate'[39m => [90mundefined[39m
    },
    LiteralMap(8) [Map] {
      [32m'period_start_date'[39m => [32m'2021-04-07T00:00:00'[39m,
      [32m'period_end_date'[39m => [32m'2021-05-05T00:00:00'[39m,
      [32m'usage'[39m => [33m22[39m,
      [32m'inclusion_override'[39m => [33mfalse[39m,
      [32m'analysis_type'[39m => [33m0[39m,
      [32m'default_inclusion'[39m => [33mfalse[39m,
      [32m'eliminated_as_outlier'[39m => [33mfalse[39m,
      [32m'whole_home_heat_loss_rate'[39m => [90mundefined[39m
    },
    LiteralMap(8) [Map] {
      [32m'period_start_date'[39m => [32m'2021-05-06T00:00:00'[39m,
      [32m'period_end_date'[39m => [32m'2021-06-07T00:00:00'[39m,
      [32m'usage'[39m => [33m19[39m,
      [32m'inclusion_override'[39m => [33mfalse[39m,
      [32m'analysis_type'[39m => [33m-1[39m,
      [32m'default_inclusion'[39m => [33mfalse[39m,
      [32m'eliminated_as_outlier'[39m => [33mfalse[39m,
      [32m'whole_home_heat_loss_rate'[39m => [90mundefined[39m
    },
    LiteralMap(8) [Map] {
      [32m'period_start_date'[39m => [32m'2021-06-08T00:00:00'[39m,
      [32m'period_end_date'[39m => [32m'2021-07-06T00:00:00'[39m,
      [32m'usage'[39m => [33m7[39m,
      [32m'inclusion_override'[39m => [33mfalse[39m,
      [32m'analysis_type'[39m => [33m-1[39m,
      [32m'default_inclusion'[39m => [33mtrue[39m,
      [32m'eliminated_as_outlier'[39m => [33mfalse[39m,
      [32m'whole_home_heat_loss_rate'[39m => [90mundefined[39m
    },
    LiteralMap(8) [Map] {
      [32m'period_start_date'[39m => [32m'2021-07-07T00:00:00'[39m,
      [32m'period_end_date'[39m => [32m'2021-08-04T00:00:00'[39m,
      [32m'usage'[39m => [33m10[39m,
      [32m'inclusion_override'[39m => [33mfalse[39m,
      [32m'analysis_type'[39m => [33m-1[39m,
      [32m'default_inclusion'[39m => [33mtrue[39m,
      [32m'eliminated_as_outlier'[39m => [33mfalse[39m,
      [32m'whole_home_heat_loss_rate'[39m => [90mundefined[39m
    },
    LiteralMap(8) [Map] {
      [32m'period_start_date'[39m => [32m'2021-08-05T00:00:00'[39m,
      [32m'period_end_date'[39m => [32m'2021-09-08T00:00:00'[39m,
      [32m'usage'[39m => [33m11[39m,
      [32m'inclusion_override'[39m => [33mfalse[39m,
      [32m'analysis_type'[39m => [33m-1[39m,
      [32m'default_inclusion'[39m => [33mtrue[39m,
      [32m'eliminated_as_outlier'[39m => [33mfalse[39m,
      [32m'whole_home_heat_loss_rate'[39m => [90mundefined[39m
    },
    LiteralMap(8) [Map] {
      [32m'period_start_date'[39m => [32m'2021-09-09T00:00:00'[39m,
      [32m'period_end_date'[39m => [32m'2021-10-05T00:00:00'[39m,
      [32m'usage'[39m => [33m8[39m,
      [32m'inclusion_override'[39m => [33mfalse[39m,
      [32m'analysis_type'[39m => [33m0[39m,
      [32m'default_inclusion'[39m => [33mfalse[39m,
      [32m'eliminated_as_outlier'[39m => [33mfalse[39m,
      [32m'whole_home_heat_loss_rate'[39m => [90mundefined[39m
    },
    LiteralMap(8) [Map] {
      [32m'period_start_date'[39m => [32m'2021-10-06T00:00:00'[39m,
      [32m'period_end_date'[39m => [32m'2021-11-03T00:00:00'[39m,
      [32m'usage'[39m => [33m13[39m,
      [32m'inclusion_override'[39m => [33mfalse[39m,
      [32m'analysis_type'[39m => [33m1[39m,
      [32m'default_inclusion'[39m => [33mfalse[39m,
      [32m'eliminated_as_outlier'[39m => [33mfalse[39m,
      [32m'whole_home_heat_loss_rate'[39m => [90mundefined[39m
    },
    LiteralMap(8) [Map] {
      [32m'period_start_date'[39m => [32m'2021-11-04T00:00:00'[39m,
      [32m'period_end_date'[39m => [32m'2021-12-06T00:00:00'[39m,
      [32m'usage'[39m => [33m41[39m,
      [32m'inclusion_override'[39m => [33mfalse[39m,
      [32m'analysis_type'[39m => [33m1[39m,
      [32m'default_inclusion'[39m => [33mtrue[39m,
      [32m'eliminated_as_outlier'[39m => [33mfalse[39m,
      [32m'whole_home_heat_loss_rate'[39m => [33m6701.5669515669515[39m
    },
    LiteralMap(8) [Map] {
      [32m'period_start_date'[39m => [32m'2021-12-07T00:00:00'[39m,
      [32m'period_end_date'[39m => [32m'2022-01-05T00:00:00'[39m,
      [32m'usage'[39m => [33m86[39m,
      [32m'inclusion_override'[39m => [33mfalse[39m,
      [32m'analysis_type'[39m => [33m1[39m,
      [32m'default_inclusion'[39m => [33mtrue[39m,
      [32m'eliminated_as_outlier'[39m => [33mfalse[39m,
      [32m'whole_home_heat_loss_rate'[39m => [33m16028.490028490029[39m
    },
    LiteralMap(8) [Map] {
      [32m'period_start_date'[39m => [32m'2022-01-06T00:00:00'[39m,
      [32m'period_end_date'[39m => [32m'2022-02-03T00:00:00'[39m,
      [32m'usage'[39m => [33m132[39m,
      [32m'inclusion_override'[39m => [33mfalse[39m,
      [32m'analysis_type'[39m => [33m1[39m,
      [32m'default_inclusion'[39m => [33mtrue[39m,
      [32m'eliminated_as_outlier'[39m => [33mfalse[39m,
      [32m'whole_home_heat_loss_rate'[39m => [33m25562.67806267806[39m
    },
    LiteralMap(8) [Map] {
      [32m'period_start_date'[39m => [32m'2022-02-04T00:00:00'[39m,
      [32m'period_end_date'[39m => [32m'2022-03-07T00:00:00'[39m,
      [32m'usage'[39m => [33m116[39m,
      [32m'inclusion_override'[39m => [33mfalse[39m,
      [32m'analysis_type'[39m => [33m1[39m,
      [32m'default_inclusion'[39m => [33mtrue[39m,
      [32m'eliminated_as_outlier'[39m => [33mfalse[39m,
      [32m'whole_home_heat_loss_rate'[39m => [33m22246.438746438744[39m
    },
    LiteralMap(8) [Map] {
      [32m'period_start_date'[39m => [32m'2022-03-08T00:00:00'[39m,
      [32m'period_end_date'[39m => [32m'2022-04-04T00:00:00'[39m,
      [32m'usage'[39m => [33m49[39m,
      [32m'inclusion_override'[39m => [33mfalse[39m,
      [32m'analysis_type'[39m => [33m1[39m,
      [32m'default_inclusion'[39m => [33mfalse[39m,
      [32m'eliminated_as_outlier'[39m => [33mfalse[39m,
      [32m'whole_home_heat_loss_rate'[39m => [90mundefined[39m
    },
    LiteralMap(8) [Map] {
      [32m'period_start_date'[39m => [32m'2022-04-05T00:00:00'[39m,
      [32m'period_end_date'[39m => [32m'2022-05-05T00:00:00'[39m,
      [32m'usage'[39m => [33m39[39m,
      [32m'inclusion_override'[39m => [33mfalse[39m,
      [32m'analysis_type'[39m => [33m0[39m,
      [32m'default_inclusion'[39m => [33mfalse[39m,
      [32m'eliminated_as_outlier'[39m => [33mfalse[39m,
      [32m'whole_home_heat_loss_rate'[39m => [90mundefined[39m
    },
    LiteralMap(8) [Map] {
      [32m'period_start_date'[39m => [32m'2022-05-06T00:00:00'[39m,
      [32m'period_end_date'[39m => [32m'2022-06-06T00:00:00'[39m,
      [32m'usage'[39m => [33m20[39m,
      [32m'inclusion_override'[39m => [33mfalse[39m,
      [32m'analysis_type'[39m => [33m-1[39m,
      [32m'default_inclusion'[39m => [33mfalse[39m,
      [32m'eliminated_as_outlier'[39m => [33mfalse[39m,
      [32m'whole_home_heat_loss_rate'[39m => [90mundefined[39m
    },
    LiteralMap(8) [Map] {
      [32m'period_start_date'[39m => [32m'2022-06-07T00:00:00'[39m,
      [32m'period_end_date'[39m => [32m'2022-07-05T00:00:00'[39m,
      [32m'usage'[39m => [33m9[39m,
      [32m'inclusion_override'[39m => [33mfalse[39m,
      [32m'analysis_type'[39m => [33m-1[39m,
      [32m'default_inclusion'[39m => [33mtrue[39m,
      [32m'eliminated_as_outlier'[39m => [33mfalse[39m,
      [32m'whole_home_heat_loss_rate'[39m => [90mundefined[39m
    },
    LiteralMap(8) [Map] {
      [32m'period_start_date'[39m => [32m'2022-07-06T00:00:00'[39m,
      [32m'period_end_date'[39m => [32m'2022-08-03T00:00:00'[39m,
      [32m'usage'[39m => [33m7[39m,
      [32m'inclusion_override'[39m => [33mfalse[39m,
      [32m'analysis_type'[39m => [33m-1[39m,
      [32m'default_inclusion'[39m => [33mtrue[39m,
      [32m'eliminated_as_outlier'[39m => [33mfalse[39m,
      [32m'whole_home_heat_loss_rate'[39m => [90mundefined[39m
    },
    LiteralMap(8) [Map] {
      [32m'period_start_date'[39m => [32m'2022-08-04T00:00:00'[39m,
      [32m'period_end_date'[39m => [32m'2022-09-03T00:00:00'[39m,
      [32m'usage'[39m => [33m8[39m,
      [32m'inclusion_override'[39m => [33mfalse[39m,
      [32m'analysis_type'[39m => [33m-1[39m,
      [32m'default_inclusion'[39m => [33mtrue[39m,
      [32m'eliminated_as_outlier'[39m => [33mfalse[39m,
      [32m'whole_home_heat_loss_rate'[39m => [90mundefined[39m
    },
    LiteralMap(8) [Map] {
      [32m'period_start_date'[39m => [32m'2022-09-04T00:00:00'[39m,
      [32m'period_end_date'[39m => [32m'2022-10-03T00:00:00'[39m,
      [32m'usage'[39m => [33m8[39m,
      [32m'inclusion_override'[39m => [33mfalse[39m,
      [32m'analysis_type'[39m => [33m0[39m,
      [32m'default_inclusion'[39m => [33mfalse[39m,
      [32m'eliminated_as_outlier'[39m => [33mfalse[39m,
      [32m'whole_home_heat_loss_rate'[39m => [90mundefined[39m
    },
    LiteralMap(8) [Map] {
      [32m'period_start_date'[39m => [32m'2022-10-04T00:00:00'[39m,
      [32m'period_end_date'[39m => [32m'2022-11-03T00:00:00'[39m,
      [32m'usage'[39m => [33m19[39m,
      [32m'inclusion_override'[39m => [33mfalse[39m,
      [32m'analysis_type'[39m => [33m1[39m,
      [32m'default_inclusion'[39m => [33mfalse[39m,
      [32m'eliminated_as_outlier'[39m => [33mfalse[39m,
      [32m'whole_home_heat_loss_rate'[39m => [90mundefined[39m
    }
  ]
}
LiteralMap(1) [Map] {
  [32m'records'[39m => [
    LiteralMap(5) [Map] {
      [32m'balance_point'[39m => [33m60[39m,
      [32m'heat_loss_rate'[39m => [33m16624.37678062678[39m,
      [32m'change_in_heat_loss_rate'[39m => [33m0[39m,
      [32m'percent_change_in_heat_loss_rate'[39m => [33m0[39m,
      [32m'standard_deviation'[39m => [33m0.3967358807600794[39m
    },
    LiteralMap(5) [Map] {
      [32m'balance_point'[39m => [33m60.5[39m,
      [32m'heat_loss_rate'[39m => [33m16208.76736111111[39m,
      [32m'change_in_heat_loss_rate'[39m => [33m-415.6094195156693[39m,
      [32m'percent_change_in_heat_loss_rate'[39m => [33m-2.564102564102563[39m,
      [32m'standard_deviation'[39m => [33m0.3967358807600794[39m
    },
    LiteralMap(5) [Map] {
      [32m'balance_point'[39m => [33m59.5[39m,
      [32m'heat_loss_rate'[39m => [33m17061.86038011696[39m,
      [32m'change_in_heat_loss_rate'[39m => [33m437.4835994901805[39m,
      [32m'percent_change_in_heat_loss_rate'[39m => [33m2.5641025641025763[39m,
      [32m'standard_deviation'[39m => [33m0.3967358807600794[39m
    }
  ]
}

 ‚úì app/utils/pyodide.test.ts (1 test) 3964ms
   ‚úì pyodide solves climate change 3955ms

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ Failed Tests 17 ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ

 FAIL  app/utils/db/bill.db.server.test.ts > bill.db.server > insertProcessedBills > should insert processed energy bills
AssertionError: expected 58.69488146725406 to be 58.694881467254056 // Object.is equality

[32m- Expected[39m
[31m+ Received[39m

[32m- 58.694881467254056[39m
[31m+ 58.69488146725406[39m

 ‚ùØ app/utils/db/bill.db.server.test.ts:37:37
     35|    
     36|    expect(firstBill?.analysisInputId).toBe(analysisInputId)
     37|    expect(firstBill?.usageQuantity).toBe(expectedFirstBill?.usage)
       |                                     ^
     38|    expect(firstBill?.wholeHomeHeatLossRate).toBe(expectedFirstBill?.wh‚Ä¶
     39|    expect(firstBill?.analysisType).toBe(expectedFirstBill?.analysis_ty‚Ä¶

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[1/17]‚éØ

 FAIL  app/utils/logic/case.logic.server.test.ts > case.logic.server > processCaseSubmission > should process a complete case submission
TypeError: Cannot read properties of undefined (reading 'toJs')
 ‚ùØ Module.processCaseSubmission app/utils/logic/case.logic.server.ts:15:38
     13| 
     14|  const pyodideProxy: PyProxy = executeParseGasBillPy(uploadedTextFile)
     15|  const pyodideResults = pyodideProxy.toJs()
       |                                      ^
     16|  pyodideProxy.destroy()
     17| 
 ‚ùØ app/utils/logic/case.logic.server.test.ts:65:19

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[2/17]‚éØ

 FAIL  app/utils/logic/case.logic.server.test.ts > case.logic.server > processCaseSubmission > should throw error when state_id is missing
AssertionError: expected [Function] to throw error including 'Missing state_id' but got 'Cannot read properties of undefined (‚Ä¶'

Expected: [32m"Missing state_id"[39m
Received: [31m"Cannot read properties of undefined (reading 'toJs')"[39m

 ‚ùØ app/utils/logic/case.logic.server.test.ts:95:4
     93|    const formData = createMockFormData(formValues)
     94| 
     95|    await expect(
       |    ^
     96|     processCaseSubmission(submission, testUser.id, formData)
     97|    ).rejects.toThrow('Missing state_id')

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[3/17]‚éØ

 FAIL  app/utils/logic/case.logic.server.test.ts > case.logic.server > processCaseSubmission > should throw error when county_id is missing
AssertionError: expected [Function] to throw error including 'Missing county_id' but got 'Cannot read properties of undefined (‚Ä¶'

Expected: [32m"Missing county_id"[39m
Received: [31m"Cannot read properties of undefined (reading 'toJs')"[39m

 ‚ùØ app/utils/logic/case.logic.server.test.ts:118:4
    116|    const formData = createMockFormData(formValues)
    117| 
    118|    await expect(
       |    ^
    119|     processCaseSubmission(submission, testUser.id, formData)
    120|    ).rejects.toThrow('Missing county_id')

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[4/17]‚éØ

 FAIL  app/utils/logic/case.logic.server.test.ts > case.logic.server > processCaseSubmission > should call all external dependencies correctly
TypeError: Cannot read properties of undefined (reading 'toJs')
 ‚ùØ Module.processCaseSubmission app/utils/logic/case.logic.server.ts:15:38
     13| 
     14|  const pyodideProxy: PyProxy = executeParseGasBillPy(uploadedTextFile)
     15|  const pyodideResults = pyodideProxy.toJs()
       |                                      ^
     16|  pyodideProxy.destroy()
     17| 
 ‚ùØ app/utils/logic/case.logic.server.test.ts:131:4

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[5/17]‚éØ

 FAIL  app/utils/logic/case.logic.server.test.ts > case.logic.server > processCaseUpdate > should process a case update
TypeError: Cannot read properties of undefined (reading 'toJs')
 ‚ùØ Module.processCaseUpdate app/utils/logic/case.logic.server.ts:64:38
     62| 
     63|  const pyodideProxy: PyProxy = executeParseGasBillPy(uploadedTextFile)
     64|  const pyodideResults = pyodideProxy.toJs()
       |                                      ^
     65|  pyodideProxy.destroy()
     66| 
 ‚ùØ app/utils/logic/case.logic.server.test.ts:169:19

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[6/17]‚éØ

 FAIL  app/utils/logic/case.logic.server.test.ts > case.logic.server > processCaseUpdate > should throw error when HeatingInput is not found
AssertionError: expected [Function] to throw error including 'Failed to find HeatingInput record fo‚Ä¶' but got 'Cannot read properties of undefined (‚Ä¶'

Expected: [32m"[7mFailed to [27mfind [7mH[27mea[7mt[27ming[7mInput record for update[27m"[39m
Received: [31m"[7mCannot read properties of unde[27mfin[7me[27md [7m(r[27mea[7md[27ming[7m 'toJs')[27m"[39m

 ‚ùØ app/utils/logic/case.logic.server.test.ts:200:4
    198|    const formData = createMockFormData(formValues)
    199| 
    200|    await expect(
       |    ^
    201|     processCaseUpdate(caseRecord.id, submission, testUser.id, formData)
    202|    ).rejects.toThrow('Failed to find HeatingInput record for update')

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[7/17]‚éØ

 FAIL  app/utils/logic/case.logic.server.test.ts > case.logic.server > processCaseUpdate > should delete existing bills before inserting new ones
TypeError: Cannot read properties of undefined (reading 'toJs')
 ‚ùØ Module.processCaseUpdate app/utils/logic/case.logic.server.ts:64:38
     62| 
     63|  const pyodideProxy: PyProxy = executeParseGasBillPy(uploadedTextFile)
     64|  const pyodideResults = pyodideProxy.toJs()
       |                                      ^
     65|  pyodideProxy.destroy()
     66| 
 ‚ùØ app/utils/logic/case.logic.server.test.ts:220:19

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[8/17]‚éØ

 FAIL  app/components/ui/heat/CaseSummaryComponents/SingleCaseForm.test.tsx > SingleCaseForm > should render form components
ReferenceError: document is not defined
 ‚ùØ Proxy.render node_modules/@testing-library/react/dist/pure.js:253:5
 ‚ùØ app/components/ui/heat/CaseSummaryComponents/SingleCaseForm.test.tsx:51:3
     49| 
     50|  it('should render form components', () => {
     51|   render(<SingleCaseForm {...defaultProps} />)
       |   ^
     52| 
     53|   expect(screen.getByTestId('home-information')).toBeInTheDocument()

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[9/17]‚éØ

 FAIL  app/components/ui/heat/CaseSummaryComponents/SingleCaseForm.test.tsx > SingleCaseForm > should show Calculate button when not in edit mode
ReferenceError: document is not defined
 ‚ùØ Proxy.render node_modules/@testing-library/react/dist/pure.js:253:5
 ‚ùØ app/components/ui/heat/CaseSummaryComponents/SingleCaseForm.test.tsx:59:3
     57| 
     58|  it('should show Calculate button when not in edit mode', () => {
     59|   render(<SingleCaseForm {...defaultProps} isEditMode={false} />)
       |   ^
     60| 
     61|   expect(screen.getByRole('button', { name: 'Calculate' })).toBeInTheD‚Ä¶

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[10/17]‚éØ

 FAIL  app/components/ui/heat/CaseSummaryComponents/SingleCaseForm.test.tsx > SingleCaseForm > should show Save Changes button when in edit mode
ReferenceError: document is not defined
 ‚ùØ Proxy.render node_modules/@testing-library/react/dist/pure.js:253:5
 ‚ùØ app/components/ui/heat/CaseSummaryComponents/SingleCaseForm.test.tsx:65:3
     63| 
     64|  it('should show Save Changes button when in edit mode', () => {
     65|   render(<SingleCaseForm {...defaultProps} isEditMode={true} />)
       |   ^
     66| 
     67|   expect(screen.getByRole('button', { name: 'Save Changes' })).toBeInT‚Ä¶

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[11/17]‚éØ

 FAIL  app/components/ui/heat/CaseSummaryComponents/SingleCaseForm.test.tsx > SingleCaseForm > should display case ID when caseInfo is provided
ReferenceError: document is not defined
 ‚ùØ Proxy.render node_modules/@testing-library/react/dist/pure.js:253:5
 ‚ùØ app/components/ui/heat/CaseSummaryComponents/SingleCaseForm.test.tsx:72:3
     70|  it('should display case ID when caseInfo is provided', () => {
     71|   const caseInfo = { caseId: 123, analysisId: 456 }
     72|   render(<SingleCaseForm {...defaultProps} caseInfo={caseInfo} />)
       |   ^
     73| 
     74|   expect(screen.getByText('Case 123')).toBeInTheDocument()

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[12/17]‚éØ

 FAIL  app/components/ui/heat/CaseSummaryComponents/SingleCaseForm.test.tsx > SingleCaseForm > should show usage data components when showUsageData is true
ReferenceError: document is not defined
 ‚ùØ Proxy.render node_modules/@testing-library/react/dist/pure.js:253:5
 ‚ùØ app/components/ui/heat/CaseSummaryComponents/SingleCaseForm.test.tsx:117:3
    115|   }
    116| 
    117|   render(
       |   ^
    118|    <SingleCaseForm
    119|     {...defaultProps}

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[13/17]‚éØ

 FAIL  app/components/ui/heat/CaseSummaryComponents/SingleCaseForm.test.tsx > SingleCaseForm > should show error when heat load analysis data is missing
ReferenceError: document is not defined
 ‚ùØ Proxy.render node_modules/@testing-library/react/dist/pure.js:253:5
 ‚ùØ app/components/ui/heat/CaseSummaryComponents/SingleCaseForm.test.tsx:140:3
    138|   }
    139| 
    140|   render(
       |   ^
    141|    <SingleCaseForm
    142|     {...defaultProps}

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[14/17]‚éØ

 FAIL  app/components/ui/heat/CaseSummaryComponents/SingleCaseForm.test.tsx > SingleCaseForm > should show success message when case is saved
ReferenceError: document is not defined
 ‚ùØ Proxy.render node_modules/@testing-library/react/dist/pure.js:253:5
 ‚ùØ app/components/ui/heat/CaseSummaryComponents/SingleCaseForm.test.tsx:155:3
    153|  it('should show success message when case is saved', () => {
    154|   const caseInfo = { caseId: 123, analysisId: 456 }
    155|   render(
       |   ^
    156|    <SingleCaseForm
    157|     {...defaultProps}

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[15/17]‚éØ

 FAIL  app/components/ui/heat/CaseSummaryComponents/SingleCaseForm.test.tsx > SingleCaseForm > should not show success message when case is not saved
ReferenceError: document is not defined
 ‚ùØ Proxy.render node_modules/@testing-library/react/dist/pure.js:253:5
 ‚ùØ app/components/ui/heat/CaseSummaryComponents/SingleCaseForm.test.tsx:169:3
    167| 
    168|  it('should not show success message when case is not saved', () => {
    169|   render(<SingleCaseForm {...defaultProps} showSavedCaseIdMsg={false} ‚Ä¶
       |   ^
    170| 
    171|   expect(screen.queryByText('Case Saved Successfully!')).not.toBeInThe‚Ä¶

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[16/17]‚éØ

 FAIL  app/components/ui/heat/CaseSummaryComponents/SingleCaseForm.test.tsx > SingleCaseForm > should not show success message when caseId is undefined
ReferenceError: document is not defined
 ‚ùØ Proxy.render node_modules/@testing-library/react/dist/pure.js:253:5
 ‚ùØ app/components/ui/heat/CaseSummaryComponents/SingleCaseForm.test.tsx:176:3
    174|  it('should not show success message when caseId is undefined', () => {
    175|   const caseInfo = { caseId: undefined, analysisId: 456 }
    176|   render(
       |   ^
    177|    <SingleCaseForm
    178|     {...defaultProps}

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[17/17]‚éØ


 Test Files  3 failed | 8 passed (11)
      Tests  17 failed | 32 passed (49)
   Start at  08:26:07
   Duration  5.89s (transform 1.01s, setup 11.03s, collect 2.07s, tests 7.05s, environment 1.09s, prepare 1.31s)

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/utils/logic/case.logic.server.test.ts x1 

 ‚ùØ app/components/ui/heat/CaseSummaryComponents/SingleCaseForm.test.tsx (9 tests | 9 failed) 24ms
   √ó SingleCaseForm > should render form components 5ms
     ‚Üí document is not defined
   √ó SingleCaseForm > should show Calculate button when not in edit mode 1ms
     ‚Üí document is not defined
   √ó SingleCaseForm > should show Save Changes button when in edit mode 1ms
     ‚Üí document is not defined
   √ó SingleCaseForm > should display case ID when caseInfo is provided 2ms
     ‚Üí document is not defined
   √ó SingleCaseForm > should show usage data components when showUsageData is true 1ms
     ‚Üí document is not defined
   √ó SingleCaseForm > should show error when heat load analysis data is missing 2ms
     ‚Üí document is not defined
   √ó SingleCaseForm > should show success message when case is saved 2ms
     ‚Üí document is not defined
   √ó SingleCaseForm > should not show success message when case is not saved 1ms
     ‚Üí document is not defined
   √ó SingleCaseForm > should not show success message when caseId is undefined 1ms
     ‚Üí document is not defined
 ‚ùØ app/utils/db/bill.db.server.test.ts (7 tests | 1 failed) 829ms
   √ó bill.db.server > insertProcessedBills > should insert processed energy bills 139ms
     ‚Üí expected 58.69488146725406 to be 58.694881467254056 // Object.is equality
   ‚úì bill.db.server > insertProcessedBills > should return 0 when no processed energy bills exist
   ‚úì bill.db.server > insertProcessedBills > should return 0 when gasBillDataFromTextFile is null
   ‚úì bill.db.server > insertProcessedBills > should handle date parsing correctly
   ‚úì bill.db.server > deleteBillsForAnalysis > should delete all bills for an analysis
   ‚úì bill.db.server > deleteBillsForAnalysis > should return 0 when no bills exist for analysis
   ‚úì bill.db.server > deleteBillsForAnalysis > should only delete bills for the specified analysis
Loading pydantic_core
Loaded pydantic_core
Loading pydantic
Loaded pydantic
Loading typing_extensions
Loaded typing_extensions
Loading annotated_types
Loaded annotated_types
Loading rules_engine
Loaded rules_engine
stdout | app/utils/logic/case.logic.server.test.ts > case.logic.server > processCaseUpdate > should delete existing bills before inserting new ones
‚úÖ Inserted 6 ProcessedEnergyBill records

 ‚ùØ app/utils/logic/case.logic.server.test.ts (7 tests | 7 failed) 708ms
   √ó case.logic.server > processCaseSubmission > should process a complete case submission 115ms
     ‚Üí Traceback (most recent call last):
  File "<exec>", line 7, in executeParse
  File "/lib/python3.13/site-packages/rules_engine/parser.py", line 327, in parse_gas_bill
    company = _detect_gas_company(data)
  File "/lib/python3.13/site-packages/rules_engine/parser.py", line 183, in _detect_gas_company
    raise ValueError("Could not determine natural gas company.")
ValueError: Could not determine natural gas company.

   √ó case.logic.server > processCaseSubmission > should throw error when state_id is missing 95ms
     ‚Üí expected [Function] to throw error including 'Missing state_id' but got 'Traceback (most recent call last):\n ‚Ä¶'
   √ó case.logic.server > processCaseSubmission > should throw error when county_id is missing 91ms
     ‚Üí expected [Function] to throw error including 'Missing county_id' but got 'Traceback (most recent call last):\n ‚Ä¶'
   √ó case.logic.server > processCaseSubmission > should call all external dependencies correctly 89ms
     ‚Üí Traceback (most recent call last):
  File "<exec>", line 7, in executeParse
  File "/lib/python3.13/site-packages/rules_engine/parser.py", line 327, in parse_gas_bill
    company = _detect_gas_company(data)
  File "/lib/python3.13/site-packages/rules_engine/parser.py", line 183, in _detect_gas_company
    raise ValueError("Could not determine natural gas company.")
ValueError: Could not determine natural gas company.

   √ó case.logic.server > processCaseUpdate > should process a case update 100ms
     ‚Üí Traceback (most recent call last):
  File "<exec>", line 7, in executeParse
  File "/lib/python3.13/site-packages/rules_engine/parser.py", line 327, in parse_gas_bill
    company = _detect_gas_company(data)
  File "/lib/python3.13/site-packages/rules_engine/parser.py", line 183, in _detect_gas_company
    raise ValueError("Could not determine natural gas company.")
ValueError: Could not determine natural gas company.

   √ó case.logic.server > processCaseUpdate > should throw error when HeatingInput is not found 102ms
     ‚Üí expected [Function] to throw error including 'Failed to find HeatingInput record fo‚Ä¶' but got 'Traceback (most recent call last):\n ‚Ä¶'
   √ó case.logic.server > processCaseUpdate > should delete existing bills before inserting new ones 106ms
     ‚Üí Traceback (most recent call last):
  File "<exec>", line 7, in executeParse
  File "/lib/python3.13/site-packages/rules_engine/parser.py", line 327, in parse_gas_bill
    company = _detect_gas_company(data)
  File "/lib/python3.13/site-packages/rules_engine/parser.py", line 183, in _detect_gas_company
    raise ValueError("Could not determine natural gas company.")
ValueError: Could not determine natural gas company.


‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ Failed Tests 7 ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ

 FAIL  app/utils/logic/case.logic.server.test.ts > case.logic.server > processCaseSubmission > should process a complete case submission
PythonError: Traceback (most recent call last):
  File "<exec>", line 7, in executeParse
  File "/lib/python3.13/site-packages/rules_engine/parser.py", line 327, in parse_gas_bill
    company = _detect_gas_company(data)
  File "/lib/python3.13/site-packages/rules_engine/parser.py", line 183, in _detect_gas_company
    raise ValueError("Could not determine natural gas company.")
ValueError: Could not determine natural gas company.

 ‚ùØ new_error public/pyodide-env/pyodide.asm.js:8:578922
 ‚ùØ null.<anonymous> wasm:/wasm/020fa64a:1:1110061
 ‚ùØ null.<anonymous> wasm:/wasm/020fa64a:1:1110261
 ‚ùØ callPyObjectKwargs public/pyodide-env/pyodide.asm.js:8:632737
 ‚ùØ Object.Module.callPyObject public/pyodide-env/pyodide.asm.js:8:633883
 ‚ùØ Function.apply public/pyodide-env/pyodide.asm.js:8:650124
 ‚ùØ Object.apply public/pyodide-env/pyodide.asm.js:8:646552
 ‚ùØ Module.processCaseSubmission app/utils/logic/case.logic.server.ts:14:32
     12|  const uploadedTextFile: string = await fileUploadHandler(formData)
     13| 
     14|  const pyodideProxy: PyProxy = executeParseGasBillPy(uploadedTextFile)
       |                                ^
     15|  const pyodideResults = pyodideProxy.toJs()
     16|  pyodideProxy.destroy()
 ‚ùØ app/utils/logic/case.logic.server.test.ts:59:19

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[1/7]‚éØ

 FAIL  app/utils/logic/case.logic.server.test.ts > case.logic.server > processCaseSubmission > should throw error when state_id is missing
AssertionError: expected [Function] to throw error including 'Missing state_id' but got 'Traceback (most recent call last):\n ‚Ä¶'

[32m- Expected[39m
[31m+ Received[39m

[32m- Missing state_id[39m
[31m+ Traceback (most recent call last):[39m
[31m+   File "<exec>", line 7, in executeParse[39m
[31m+   File "/lib/python3.13/site-packages/rules_engine/parser.py", line 327, in parse_gas_bill[39m
[31m+     company = _detect_gas_company(data)[39m
[31m+   File "/lib/python3.13/site-packages/rules_engine/parser.py", line 183, in _detect_gas_company[39m
[31m+     raise ValueError("Could not determine natural gas company.")[39m
[31m+ ValueError: Could not determine natural gas company.[39m
[31m+[39m

 ‚ùØ app/utils/logic/case.logic.server.test.ts:89:4
     87|    const formData = createMockFormData(formValues)
     88| 
     89|    await expect(
       |    ^
     90|     processCaseSubmission(submission, testUser.id, formData)
     91|    ).rejects.toThrow('Missing state_id')

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[2/7]‚éØ

 FAIL  app/utils/logic/case.logic.server.test.ts > case.logic.server > processCaseSubmission > should throw error when county_id is missing
AssertionError: expected [Function] to throw error including 'Missing county_id' but got 'Traceback (most recent call last):\n ‚Ä¶'

[32m- Expected[39m
[31m+ Received[39m

[32m- Missing county_id[39m
[31m+ Traceback (most recent call last):[39m
[31m+   File "<exec>", line 7, in executeParse[39m
[31m+   File "/lib/python3.13/site-packages/rules_engine/parser.py", line 327, in parse_gas_bill[39m
[31m+     company = _detect_gas_company(data)[39m
[31m+   File "/lib/python3.13/site-packages/rules_engine/parser.py", line 183, in _detect_gas_company[39m
[31m+     raise ValueError("Could not determine natural gas company.")[39m
[31m+ ValueError: Could not determine natural gas company.[39m
[31m+[39m

 ‚ùØ app/utils/logic/case.logic.server.test.ts:112:4
    110|    const formData = createMockFormData(formValues)
    111| 
    112|    await expect(
       |    ^
    113|     processCaseSubmission(submission, testUser.id, formData)
    114|    ).rejects.toThrow('Missing county_id')

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[3/7]‚éØ

 FAIL  app/utils/logic/case.logic.server.test.ts > case.logic.server > processCaseSubmission > should call all external dependencies correctly
PythonError: Traceback (most recent call last):
  File "<exec>", line 7, in executeParse
  File "/lib/python3.13/site-packages/rules_engine/parser.py", line 327, in parse_gas_bill
    company = _detect_gas_company(data)
  File "/lib/python3.13/site-packages/rules_engine/parser.py", line 183, in _detect_gas_company
    raise ValueError("Could not determine natural gas company.")
ValueError: Could not determine natural gas company.

 ‚ùØ new_error public/pyodide-env/pyodide.asm.js:8:578922
 ‚ùØ null.<anonymous> wasm:/wasm/020fa64a:1:1110061
 ‚ùØ null.<anonymous> wasm:/wasm/020fa64a:1:1110261
 ‚ùØ callPyObjectKwargs public/pyodide-env/pyodide.asm.js:8:632737
 ‚ùØ Object.Module.callPyObject public/pyodide-env/pyodide.asm.js:8:633883
 ‚ùØ Function.apply public/pyodide-env/pyodide.asm.js:8:650124
 ‚ùØ Object.apply public/pyodide-env/pyodide.asm.js:8:646552
 ‚ùØ Module.processCaseSubmission app/utils/logic/case.logic.server.ts:14:32
     12|  const uploadedTextFile: string = await fileUploadHandler(formData)
     13| 
     14|  const pyodideProxy: PyProxy = executeParseGasBillPy(uploadedTextFile)
       |                                ^
     15|  const pyodideResults = pyodideProxy.toJs()
     16|  pyodideProxy.destroy()
 ‚ùØ app/utils/logic/case.logic.server.test.ts:125:4

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[4/7]‚éØ

 FAIL  app/utils/logic/case.logic.server.test.ts > case.logic.server > processCaseUpdate > should process a case update
PythonError: Traceback (most recent call last):
  File "<exec>", line 7, in executeParse
  File "/lib/python3.13/site-packages/rules_engine/parser.py", line 327, in parse_gas_bill
    company = _detect_gas_company(data)
  File "/lib/python3.13/site-packages/rules_engine/parser.py", line 183, in _detect_gas_company
    raise ValueError("Could not determine natural gas company.")
ValueError: Could not determine natural gas company.

 ‚ùØ new_error public/pyodide-env/pyodide.asm.js:8:578922
 ‚ùØ null.<anonymous> wasm:/wasm/020fa64a:1:1110061
 ‚ùØ null.<anonymous> wasm:/wasm/020fa64a:1:1110261
 ‚ùØ callPyObjectKwargs public/pyodide-env/pyodide.asm.js:8:632737
 ‚ùØ Object.Module.callPyObject public/pyodide-env/pyodide.asm.js:8:633883
 ‚ùØ Function.apply public/pyodide-env/pyodide.asm.js:8:650124
 ‚ùØ Object.apply public/pyodide-env/pyodide.asm.js:8:646552
 ‚ùØ Module.processCaseUpdate app/utils/logic/case.logic.server.ts:63:32
     61|  const uploadedTextFile: string = await fileUploadHandler(formData)
     62| 
     63|  const pyodideProxy: PyProxy = executeParseGasBillPy(uploadedTextFile)
       |                                ^
     64|  const pyodideResults = pyodideProxy.toJs()
     65|  pyodideProxy.destroy()
 ‚ùØ app/utils/logic/case.logic.server.test.ts:163:19

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[5/7]‚éØ

 FAIL  app/utils/logic/case.logic.server.test.ts > case.logic.server > processCaseUpdate > should throw error when HeatingInput is not found
AssertionError: expected [Function] to throw error including 'Failed to find HeatingInput record fo‚Ä¶' but got 'Traceback (most recent call last):\n ‚Ä¶'

[32m- Expected[39m
[31m+ Received[39m

[32m- Failed to find HeatingInput record for update[39m
[31m+ Traceback (most recent call last):[39m
[31m+   File "<exec>", line 7, in executeParse[39m
[31m+   File "/lib/python3.13/site-packages/rules_engine/parser.py", line 327, in parse_gas_bill[39m
[31m+     company = _detect_gas_company(data)[39m
[31m+   File "/lib/python3.13/site-packages/rules_engine/parser.py", line 183, in _detect_gas_company[39m
[31m+     raise ValueError("Could not determine natural gas company.")[39m
[31m+ ValueError: Could not determine natural gas company.[39m
[31m+[39m

 ‚ùØ app/utils/logic/case.logic.server.test.ts:194:4
    192|    const formData = createMockFormData(formValues)
    193| 
    194|    await expect(
       |    ^
    195|     processCaseUpdate(caseRecord.id, submission, testUser.id, formData)
    196|    ).rejects.toThrow('Failed to find HeatingInput record for update')

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[6/7]‚éØ

 FAIL  app/utils/logic/case.logic.server.test.ts > case.logic.server > processCaseUpdate > should delete existing bills before inserting new ones
PythonError: Traceback (most recent call last):
  File "<exec>", line 7, in executeParse
  File "/lib/python3.13/site-packages/rules_engine/parser.py", line 327, in parse_gas_bill
    company = _detect_gas_company(data)
  File "/lib/python3.13/site-packages/rules_engine/parser.py", line 183, in _detect_gas_company
    raise ValueError("Could not determine natural gas company.")
ValueError: Could not determine natural gas company.

 ‚ùØ new_error public/pyodide-env/pyodide.asm.js:8:578922
 ‚ùØ null.<anonymous> wasm:/wasm/020fa64a:1:1110061
 ‚ùØ null.<anonymous> wasm:/wasm/020fa64a:1:1110261
 ‚ùØ callPyObjectKwargs public/pyodide-env/pyodide.asm.js:8:632737
 ‚ùØ Object.Module.callPyObject public/pyodide-env/pyodide.asm.js:8:633883
 ‚ùØ Function.apply public/pyodide-env/pyodide.asm.js:8:650124
 ‚ùØ Object.apply public/pyodide-env/pyodide.asm.js:8:646552
 ‚ùØ Module.processCaseUpdate app/utils/logic/case.logic.server.ts:63:32
     61|  const uploadedTextFile: string = await fileUploadHandler(formData)
     62| 
     63|  const pyodideProxy: PyProxy = executeParseGasBillPy(uploadedTextFile)
       |                                ^
     64|  const pyodideResults = pyodideProxy.toJs()
     65|  pyodideProxy.destroy()
 ‚ùØ app/utils/logic/case.logic.server.test.ts:214:19

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[7/7]‚éØ


 Test Files  3 failed (3)
      Tests  17 failed | 6 passed (23)
   Start at  08:31:43
   Duration  3.96s

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
c[3J RERUN  app/components/ui/heat/CaseSummaryComponents/SingleCaseForm.test.tsx x1 

 ‚ùØ app/utils/logic/case.logic.server.test.ts (7 tests | 7 failed) 708ms
   √ó case.logic.server > processCaseSubmission > should process a complete case submission 115ms
     ‚Üí Traceback (most recent call last):
  File "<exec>", line 7, in executeParse
  File "/lib/python3.13/site-packages/rules_engine/parser.py", line 327, in parse_gas_bill
    company = _detect_gas_company(data)
  File "/lib/python3.13/site-packages/rules_engine/parser.py", line 183, in _detect_gas_company
    raise ValueError("Could not determine natural gas company.")
ValueError: Could not determine natural gas company.

   √ó case.logic.server > processCaseSubmission > should throw error when state_id is missing 95ms
     ‚Üí expected [Function] to throw error including 'Missing state_id' but got 'Traceback (most recent call last):\n ‚Ä¶'
   √ó case.logic.server > processCaseSubmission > should throw error when county_id is missing 91ms
     ‚Üí expected [Function] to throw error including 'Missing county_id' but got 'Traceback (most recent call last):\n ‚Ä¶'
   √ó case.logic.server > processCaseSubmission > should call all external dependencies correctly 89ms
     ‚Üí Traceback (most recent call last):
  File "<exec>", line 7, in executeParse
  File "/lib/python3.13/site-packages/rules_engine/parser.py", line 327, in parse_gas_bill
    company = _detect_gas_company(data)
  File "/lib/python3.13/site-packages/rules_engine/parser.py", line 183, in _detect_gas_company
    raise ValueError("Could not determine natural gas company.")
ValueError: Could not determine natural gas company.

   √ó case.logic.server > processCaseUpdate > should process a case update 100ms
     ‚Üí Traceback (most recent call last):
  File "<exec>", line 7, in executeParse
  File "/lib/python3.13/site-packages/rules_engine/parser.py", line 327, in parse_gas_bill
    company = _detect_gas_company(data)
  File "/lib/python3.13/site-packages/rules_engine/parser.py", line 183, in _detect_gas_company
    raise ValueError("Could not determine natural gas company.")
ValueError: Could not determine natural gas company.

   √ó case.logic.server > processCaseUpdate > should throw error when HeatingInput is not found 102ms
     ‚Üí expected [Function] to throw error including 'Failed to find HeatingInput record fo‚Ä¶' but got 'Traceback (most recent call last):\n ‚Ä¶'
   √ó case.logic.server > processCaseUpdate > should delete existing bills before inserting new ones 106ms
     ‚Üí Traceback (most recent call last):
  File "<exec>", line 7, in executeParse
  File "/lib/python3.13/site-packages/rules_engine/parser.py", line 327, in parse_gas_bill
    company = _detect_gas_company(data)
  File "/lib/python3.13/site-packages/rules_engine/parser.py", line 183, in _detect_gas_company
    raise ValueError("Could not determine natural gas company.")
ValueError: Could not determine natural gas company.

 ‚ùØ app/utils/db/bill.db.server.test.ts (7 tests | 1 failed) 829ms
   √ó bill.db.server > insertProcessedBills > should insert processed energy bills 139ms
     ‚Üí expected 58.69488146725406 to be 58.694881467254056 // Object.is equality
   ‚úì bill.db.server > insertProcessedBills > should return 0 when no processed energy bills exist
   ‚úì bill.db.server > insertProcessedBills > should return 0 when gasBillDataFromTextFile is null
   ‚úì bill.db.server > insertProcessedBills > should handle date parsing correctly
   ‚úì bill.db.server > deleteBillsForAnalysis > should delete all bills for an analysis
   ‚úì bill.db.server > deleteBillsForAnalysis > should return 0 when no bills exist for analysis
   ‚úì bill.db.server > deleteBillsForAnalysis > should only delete bills for the specified analysis
 ‚ùØ app/components/ui/heat/CaseSummaryComponents/SingleCaseForm.test.tsx (9 tests | 9 failed) 59ms
   √ó SingleCaseForm > should render form components 22ms
     ‚Üí useSubmit must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.
   √ó SingleCaseForm > should show Calculate button when not in edit mode 6ms
     ‚Üí useSubmit must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.
   √ó SingleCaseForm > should show Save Changes button when in edit mode 6ms
     ‚Üí useSubmit must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.
   √ó SingleCaseForm > should display case ID when caseInfo is provided 3ms
     ‚Üí useSubmit must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.
   √ó SingleCaseForm > should show usage data components when showUsageData is true 4ms
     ‚Üí useSubmit must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.
   √ó SingleCaseForm > should show error when heat load analysis data is missing 2ms
     ‚Üí useSubmit must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.
   √ó SingleCaseForm > should show success message when case is saved 3ms
     ‚Üí useSubmit must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.
   √ó SingleCaseForm > should not show success message when case is not saved 2ms
     ‚Üí useSubmit must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.
   √ó SingleCaseForm > should not show success message when caseId is undefined 3ms
     ‚Üí useSubmit must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ Failed Tests 9 ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ

 FAIL  app/components/ui/heat/CaseSummaryComponents/SingleCaseForm.test.tsx > SingleCaseForm > should render form components
 FAIL  app/components/ui/heat/CaseSummaryComponents/SingleCaseForm.test.tsx > SingleCaseForm > should show Calculate button when not in edit mode
 FAIL  app/components/ui/heat/CaseSummaryComponents/SingleCaseForm.test.tsx > SingleCaseForm > should show Save Changes button when in edit mode
 FAIL  app/components/ui/heat/CaseSummaryComponents/SingleCaseForm.test.tsx > SingleCaseForm > should display case ID when caseInfo is provided
 FAIL  app/components/ui/heat/CaseSummaryComponents/SingleCaseForm.test.tsx > SingleCaseForm > should show usage data components when showUsageData is true
 FAIL  app/components/ui/heat/CaseSummaryComponents/SingleCaseForm.test.tsx > SingleCaseForm > should show error when heat load analysis data is missing
 FAIL  app/components/ui/heat/CaseSummaryComponents/SingleCaseForm.test.tsx > SingleCaseForm > should show success message when case is saved
 FAIL  app/components/ui/heat/CaseSummaryComponents/SingleCaseForm.test.tsx > SingleCaseForm > should not show success message when case is not saved
 FAIL  app/components/ui/heat/CaseSummaryComponents/SingleCaseForm.test.tsx > SingleCaseForm > should not show success message when caseId is undefined
Error: useSubmit must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.
 ‚ùØ invariant node_modules/react-router/dist/development/index.js:338:11
    336| function invariant(value, message) {
    337|   if (value === false || value === null || typeof value === "undefined‚Ä¶
    338|     throw new Error(message);
       |           ^
    339|   }
    340| }
 ‚ùØ useDataRouterContext3 node_modules/react-router/dist/development/index.js:9258:3
 ‚ùØ useSubmit node_modules/react-router/dist/development/index.js:9341:20
 ‚ùØ Form node_modules/react-router/dist/development/index.js:9160:18
 ‚ùØ Object.react-stack-bottom-frame node_modules/react-dom/cjs/react-dom-client.development.js:22428:20
 ‚ùØ renderWithHooks node_modules/react-dom/cjs/react-dom-client.development.js:5757:22
 ‚ùØ updateForwardRef node_modules/react-dom/cjs/react-dom-client.development.js:7762:19
 ‚ùØ beginWork node_modules/react-dom/cjs/react-dom-client.development.js:10014:18
 ‚ùØ runWithFiberInDEV node_modules/react-dom/cjs/react-dom-client.development.js:543:16
 ‚ùØ performUnitOfWork node_modules/react-dom/cjs/react-dom-client.development.js:15052:22

‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[1/9]‚éØ


 Test Files  3 failed (3)
      Tests  17 failed | 6 passed (23)
   Start at  08:31:59
   Duration  713ms

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
Cancelling test run. Press CTRL+c again to exit forcefully.

